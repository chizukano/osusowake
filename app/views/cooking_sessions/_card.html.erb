<%= link_to cooking_session, class: "card text-decoration-none text-black h-100" do %>
  <div class="position-relative">
    <%= cl_image_tag cooking_session.meal.photo.key, class: "card-img-top img-fluid", height:500, width:720, crop: :fill %>
    <%= cl_image_tag(
      cooking_session.meal.chef.user.photo.key,
      gravity: "face",
      width: 70,
      height: 70,
      crop: :fill,
      class: "card-image-avatar"
    ) %>
  </div>
  <div class="card-body fs-6 d-flex flex-column">
    <div class="flex-grow-1 mb-3">
      <h5 class="card-title mb-0"><%= cooking_session.meal.name %></h5>
      <p class="card-text text-muted small">by <%= cooking_session.chef_name %></p>
    </div>
    <div>
      <p class="card-text mb-0 text-end fs-6">
        <span class="text-muted small">Ready in</span>
        <%= distance_of_time_in_words_to_now(cooking_session.end_at) %>
      </p>
      <% if session[:search_result].present? %>
        <p class="card-text">
          <%= cooking_session.distance_to(session[:search_result]).round(2) %><span class="small text-muted">km away</span>
        </p>
      <% end %>
    </div>
  </div>
  <div class="progress position-relative" style="1rem">
    <div class="progress-bar progress-bar bg-success fs-3" role="progressbar" style="width: <%= number_to_percentage(cooking_session.ratio_of_portions_reserved * 100, precision: 0) %>;" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
    <div class="text-end flex-grow-1 position-absolute w-100">
      <%= cooking_session.portions_left %> <span class="small  me-2">portions left</span>
    </div>
  </div>
<% end %>
