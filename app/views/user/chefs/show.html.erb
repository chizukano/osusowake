<div class="container d-flex justify-content-center">
  <h1 class="mt-3 mb-3">Welcome <strong><%= @chef.user.username %>!</h1>
</div>
<hr>
<div class="container mb-3">
  <h3>What's Cooking?</h3>
  <% @chef.meals.each do |meal| %>
    <% if meal.cooking_sessions.exists? %>
      <% meal.cooking_sessions.each do |cooking_session|%>
        <div class="card mb-2">
          <div class="card-body d-flex">
            <%= cl_image_tag meal.photo.key,  height:100, width:130, crop: :fill %>
            <div class="py-2 px-3">
              <h5 class="card-title"><%= meal.name %></h5>
              <h6><small>pickup in</small> <%= distance_of_time_in_words_to_now(cooking_session.end_at) %></h6>
              <h6><%= cooking_session.portions_reserved %> / <%= cooking_session.max_portions %> <small>portions reserved</small></h6>
            </div>
            <div class="progress position-relative" style="1rem">
              <div class="progress-bar progress-bar bg-success fs-3" role="progressbar"
              style="width: <%= number_to_percentage(cooking_session.ratio_of_portions_reserved * 100, precision: 0) %>;"
              aria-valuenow="25" aria-valuemin="0" aria-valuemax="100">
              </div>
              <div class="text-end flex-grow-1 position-absolute w-100">
                <%= cooking_session.portions_reserved %> <span class="small  me-2">portions reserved</span>
              </div>
            </div>
          </div>
        <% end %>
      </div>
    <% end %>
  <% end %>
  <%= link_to "Schedule a cooking", new_user_chef_cooking_session_path, class: "btn btn-success mt-1" %>
</div>
<div class="container mb-3">
  <% if @chef.meals.exists? %>
    <h3>Your Cookbook</h3>
    <% @chef.meals.each do |meal| %>
      <div class="card text-center mb-2">
      <div class="card-body">
        <%= cl_image_tag meal.photo.key,  height:100, width:130, crop: :fill %>
        <h5 class="card-title"><%= meal.name %></h5>
        <% if meal.cooking_sessions.count > 1 %>
        <h6>Cooked <%= meal.cooking_sessions.count %> times</h6>
        <% end %>
      </div>
    </div>
    <% end %>
  <% end %>
</div>
<%# display past cooking sessions? %>
<div class="container">
<ul class="list-unstyled">
  <li>
    <%= link_to "Add a new dish", new_user_chef_meal_path, class: "btn btn-success mb-5" %>
  </li>
  <li><%= link_to "Your profile page", user_chef_path, class: "btn btn-outline-success mt-1" %></li>
  <li><%= link_to "Explore dishes from other chefs!", cooking_sessions_path, class: "btn btn-outline-success mt-1" %></li>
</ul>
</div>
